
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="stylesheet" href="/css/blog.css?20140215_130939" type="text/css" />
<!--[if lte IE 9 ]>
	<link rel="stylesheet" href="/css/blog-ie.css?20140215_130939" type="text/css" />
<![endif]-->

	<title>AndroidでWebViewのデバッグ : 時々、失業SEの開発日誌</title>
	<meta name="keywords" content="android,java,javascript" /> 

	<meta property="og:title" content="AndroidでWebViewのデバッグ : 時々、失業SEの開発日誌" />
	<meta property="og:type" content="blog" />
	<meta property="og:url" content="http://blog.kotemaru.org/2014/02/17/android-webview-debug.html" />
	<meta property="og:locale" content="ja_JP" />
	<meta property="og:site_name" content="時々、失業SEの開発日誌" />
	<meta property="og:description" content="AndroidでWebViewのデバッグ" />
	<script src="/js/jquery-1.8.2.js" ></script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21698246-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>
<body>
  <div id="outFrame">
    <div id="header">
	<a href="http://blog.kotemaru.org/" id="mainTitle">時々、失業SEの開発日誌</a>
	<div id="subTitle"></div>
    </div>

    <div id="content">
<script>
var Global = {};
Global.contentPath = "2014/02/17/android-webview-debug.html";
</script>
<script src="/js/comment.js?20140215_130939" ></script>

<div class="Paging">
<span class="NextPage"><a href="/2013/10/28/android-orientation-proc.html">Androidの回転方向をプログラムから固定する ≫</a></span>
<br clear="all"/>
<br style="line-height: 50%;"/>
</div>
<!-- ===================================================== -->

<div class="PostedDate">2014/02/17</div>
<h1 class="ContentHeader"><a href="/2014/02/17/android-webview-debug.html">AndroidでWebViewのデバッグ</a></h1>
<div class="ContentBody">
<p>WebView 上で Web アプリを開発する場合に JavaScript
のデバッグが大変そうだなと思いどうすれば良いのか調べてみた。</p>

<p>結論から言うと PC の Chrome に ADB プラグインをインストールすると
リモートで Chrome のデバッガが使える事が分かった。</p>

<p>しかも WebView がデバックできるようになったのが
4.4(KitKat) からと言うタイムリーさ。</p>

<ul>
<li>公式：<a href="https://developers.google.com/chrome-developer-tools/docs/remote-debugging?hl=ja">Remote Debugging Chrome on Android</a></li>
<li>参考：<a href="http://iti.hatenablog.jp/entry/2013/11/05/182133">SDK不要Android端末のリモートデバッグChrome拡張機能「ADB」</a></li>
</ul>

<h3>インストール</h3>

<p>以下の Chrome ウェブストアからプラグインをインストールすれば終わりです。<br>
（なぜかウェブストアの検索では出てこないのでリンクを直接叩く必要があります。）</p>

<ul>
<li><a href="https://chrome.google.com/webstore/detail/adb/dpngiggdglpdnjdoaefidgiigpemgage">https://chrome.google.com/webstore/detail/adb/dpngiggdglpdnjdoaefidgiigpemgage</a></li>
</ul>

<p><img src="/2014/02/17/android-webview-debug-1.png" /></p>

<p>「＋無料」のボタンをクリックでインストール開始します。</p>

<h3>エミュレータの準備</h3>

<p>WebView のデバッグは 4.4(KitKat) からなので andrid-sdk の
SDK Manager を起動して 4.4.2(Level-19) 以上の開発環境を一式落とします。</p>

<p>次に AVD Manager を起動して 4.4.2(Level-19) 以上のエミュレータイメージを作成して起動します。</p>

<p><img src="/2014/02/17/android-webview-debug-2.png"  width="50%"/></p>

<p>Target: の項目が 4.4.2(Level-19) 以上になっていれば他の項目は何でも良いです。</p>

<p>試してませんが 4.4 の実機があればそちらでもデバッグ可能なようです。</p>

<h3>WebViewアプリの準備</h3>

<p>アプリのどこかに以下のコードを入れてリモートデバッグを有効にします。</p>

<pre><code>if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {
    WebView.setWebContentsDebuggingEnabled(true);
}
</code></pre>

<p>API Level-19 以前には存在しないメソッドなのでバージョンチェックが必要です。
クラスメソッドなので WebView インスタンスは必要ありません。</p>

<p>コンパイルしなおしてエミュレータで実行しておけば準備完了です。
<img src="/2014/02/17/android-webview-debug-3.png"/></p>

<h3>デバッガの起動</h3>

<p>PC の Chrome を起動するとドロイド君のアイコンが有るのでクリックして
「View Inspection Targets」を選択します。</p>

<p><img src="/2014/02/17/android-webview-debug-4.png"/></p>

<p>デバッグ可能なブラウザの一覧が表示されるので「inspect」をクリックします。</p>

<p><img src="/2014/02/17/android-webview-debug-5.png"/></p>

<p>別ウインドウでデバッガが起動するので後は通常の Chrome
と同じようにデバッグできます。</p>

<p><img src="/2014/02/17/android-webview-debug-7.png"/></p>

<p>ブレークポイントで止めて見たところ。</p>

<p><img src="/2014/02/17/android-webview-debug-9.png"/></p>

<h3>所感</h3>

<p>JavaScript のデバッグにおいては Chrome のデバッガは圧倒的に使いやすいのでこれは大変ナイスです。</p>

<p>これで Android におけるWebハイブリッドアプリを開発する為の環境はほぼ揃った用に思えます。</p>

</div>
<!-- ===================================================== -->
<a name="Comment"></a>
<div class="CommentTitle">この投稿へのコメント
<img src="/img/refresh.png" onclick="Global.commentLoad()"/>
</div>

<div id="commentView">
</div>


<div class="CommentFormTitle">コメント・フォーム</div>
<form name="commentForm" action="/Comment" method="POST">
	<input name="page" type="hidden" value="2014/02/17/android-webview-debug.html" />
	<table class="CommentFormTable" width="70%">
		<tr><th>名前</th>	<td><input name="name" value="名無し"/></td></tr>
		<tr><th>EMail</th>	<td><input name="email" /></td></tr>
		<tr><th>削除キー</th>	<td><input name="passwd" /></td></tr>
		<tr><th>本文</th><td><textarea name="body"></textarea></td></tr>

		<tr><td width="1%"></td><td width="99%"></td></tr>
		<tr><td colspan="2">
			<button type="Button" onclick="Global.commentPost()">書込</button>
			(コメントが反映されない場合はリロードしてください。)
		</td></tr>
	</table>
</form>
<!-- ===================================================== -->

<hr class="ContentEnd"/>

<div class="Paging">
<span class="NextPage"><a href="/2013/10/28/android-orientation-proc.html">Androidの回転方向をプログラムから固定する ≫</a></span>
<br clear="all"/>
</div>



    </div>

    <div id="side">
     	<h5>プロフィール</h5>
     	<div id="profile">
     	<img src="/apple-touch-icon.png" align="left"/>
     	20年勤めた会社がリーマンショックで消滅、紆余曲折を経て現在はフリーランスのSE。
     	失業をきっかけにこのブログを始める。
     	</div>
     	
    	<p/><h5>サイト内検索</h5>
		<form action="http://www.google.com/search">
			<input type="hidden" name="hl" value="ja" />
			<input type="hidden" name="ie" value="UTF-8">
			<input type="hidden" name="oe" value="UTF-8">
			<input type="hidden" value="blog.kotemaru.org" name="as_sitesearch" />
			<input type="text" id="query" name="q" size="20" maxlength="256" value="" 
			/><input type="submit" name="btnG" value="検索" />
		</form> 

		
     	<p/><h5>登録</h5>
    	<a class="RSS" href="/atom.xml"><img src="/img/RSS.png"/><span>RSS/2.0</span></a>

    	<p/><h5>カテゴリ</h5>
		<iframe class="BlogParts" height="200" src="/category.html?20140215_130939" frameborder="0" ></iframe>

    	<p/><h5>最近の投稿<span class="CategoryTag">${categoryTag}<span></h5>
	 	<iframe class="BlogParts" height="200" src="/${recent-path}recent.html?20140215_130939" frameborder="0" ></iframe>

    	<p/><h5>リンク</h5>
	 	<iframe class="BlogParts" src="/links.html?20140215_130939" frameborder="0" ></iframe>

    	<p/><h5>アーカイブ</h5>
	 	<iframe class="BlogParts" src="/archive.html?20140215_130939" frameborder="0" ></iframe>

    </div>
    <br clear="all" />
    <div id="footer">
	Copyright 2013- @kotemaru.org<br/>
	<img src="http://developers.google.com/appengine/images/appengine-noborder-120x30.gif"
alt="Powered by Google App Engine" />
    </div>
  </div>
</body>
</html>